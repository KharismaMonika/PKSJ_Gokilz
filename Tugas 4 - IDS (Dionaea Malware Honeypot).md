# Tugas 4 - IDS (Malware Honeypot)
##### *PKSJ Kelompok 8:*
- *Muhammad Faiez Ananda (5113100055)*
- *Ade Ilham Fajri (5113100058)*
- *Muhammad Divi Jaya N (5113100066)*

---

## Pendahuluan
Honeypot adalah sebuah sistem palsu yang dirancang untuk menjebak penyerang/malware, seolah-olah yang diserang adalah sistem yang asli. Honeypot ini dapat berguna untuk membuang–buang sumber daya penyerang atau mengalihkan penyerang dari sesuatu yang lebih berharga. Sistem palsu tersebut melayani setiap serangan yang dilakukan oleh penyerang/malware dalam melakukan penetrasi sehingga seolah-olah penyerang menyerang sistem yang asli. Bagi para administrator jaringan yang menerapkan sistem Honeypot ini, akan memperoleh informasi-informasi perilaku dari penyerang/malware dan mempelajarinya, sehingga dapat dilakukan pencegahan terhadap sistem yang asli.

Dalam sebuah lingkungan sistem yang aman, biasanya terdapat IDS (Intrusion Detection System) atau IPS (Intrusion Prevention System) yang bertugas untuk menjaga sistem dari serangan-serangan yang ada. Namun IDS dan IPS sendiri tidak serta merta dapat menahan serangan para penyerang/malware. Honeypot ini sangat penting untuk menjadi suatu perangkat tambahan demi meminimalisir serangan yang terjadi ke dalam sistem.

Ada berbagai macam Honeypot services yang tersedia, tetapi kami akan lebih fokus membahas tentang Malware Honeypot. Malware Honeypot yang kami gunakan adalah Dionaea. Kami akan mencoba melakukan penetrasi menggunakan malware ke sistem yang sudah dipasang Dionaea sebagai Malware Honeypot. Dari serangan itu kami akan mencoba melakukan analisis bagaimana Dionaea menangani serangan malware tersebut.

---

## Dasar Teori

### *Dionaea*
Dionaea adalah sebuah low interaction honeypot yang didesain untuk menangkap malware dan vulnerability exploit yang ada di dalam sebuah jaringan. Dionaea membuat sistem palsu yang menyediakan vulnerable services dan mengumpulkan informasi tentang perilaku dari penyerang atau malware yang masuk. Dionaea menggunakan python sebagai scripting language dan menggunakan arsitektur modular. Dionaea mampu mendeteksi shellcodes dengan menggunakan LibEmu dan juga support dengan IPv6 dan TLS.

### *Metasploit*
Metasploit adalah sebuah penetration tool yang cukup powerful untuk melakukan penestrasi kedalam sebuah sistem. Metasploit bisa juga dikatakan sebagai sebuah platform pengembangan untuk membuat security tools dan exploit. Metasploit ini biasanya digunakan oleh profesional keamanan jaringan untuk melakukan tes penetrasi. Metasploit menyerang dengan cara mengirimkan exploit yang berisi payload yang sudah ditentukan oleh penyerang sistem pada komputer korban. Metaspoit ditulis dalam bahasa pemrograman Ruby.

### *Armitage*
Armitage adalah sebuah Tools Grafis (Windows & Linux) untuk manajemen serangan yang digunakan pada Metasploit yang mampu memvisualisasikan target, merekomendasikan eksploitasi, dan memperlihatkan kemampuan canggih melalu sebuah skema. Armitage bertujuan untuk membuat Metasploit dapat digunakan untuk praktisi keamanan yang mengerti hacking. Armitage mengatur kemampuan Metasploit saat proses hacking. Terdapat fitur untuk discovery, akses, post-exploitation, dan penetrasi. Armitage juga memvisualisasikan database target sehingga akan selalu tahu dimana host bekerja dan dimana session tersedia.

---

## Penjelasan Instalasi

### *Dionaea*
Ada 2 cara yang dapat dilakukan untuk melakukan instalasi Dionaea, yaitu From Package atau From Source.

##### Install From Package
1. Pertama-tama update Ubuntu dengan memasukkan `sudo apt-get update`.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Package/1.PNG?raw=true)
</p>
2. Lakukan pula upgrade dengan perintah `sudo apt-get dist-upgrade`.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Package/2.PNG?raw=true)
</p>
3. Kemudian install software properties yang dibutuhkan dengan perintah `sudo apt-get install software-properties-common`.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Package/3.PNG?raw=true)
</p>
4. Tambahkan file dari repository ppa-honeynet/nightly.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Package/4.PNG?raw=true)
</p>
5. Lakukan update sekali lagi.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Package/5.PNG?raw=true)
</p>
6. Lalu jalankan perintah untuk instalasi Dionaea, `sudo apt-get install dionaea`.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Package/6.PNG?raw=true)
</p>

##### Install From Source
1. Pertama-tama lakukan update sistem, `sudo apt-get update`.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Package/1.PNG?raw=true)
</p>
2. Kemudian lakukan instalasi paket-paket yang diperlukan seperti pada gambar di bawah ini.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Source/1.PNG?raw=true)
</p>
3. Masukkan perintah `autoconf -vi`.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Source/2.PNG?raw=true)
</p>
4. Lakukan konfigurasi seperti dibawah ini.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Source/3.PNG?raw=true)
</p>
5. Masukkan `make` dan `make install` (tambahkan sudo jika muncul Permission Denied).
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Source/4.PNG?raw=true)
</p>
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Source/5.PNG?raw=true)
</p>
6. Untuk melihat apakah Dionaea sudah terinstall dengan baik, masukkan perintah `sudo ./dionaea --help`.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Instalasi%20Dionaea/From%20Source/6.PNG?raw=true)
</p>

---

## Penetration Testing

### Shell Reverse TCP

####Untuk melakukan serangan terhadap komputer target, maka komputer targer harus menjalankan *Reverse TCP*. Dalam percobaan ini, kami menggunakan 2 metode agar komputer targer dapat menjalan *Reverse TCP*, yaitu :
1. Melalui `command` *Shell Reverse TCP* , yang mana cantumkan IP komputer kita yang hendak melakukan attack
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/1.PNG?raw=true)
</p>
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/2.PNG?raw=true)
</p>
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/11.PNG?raw=true)
</p>
2. Melalui fitur attack dari *Armitage*
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/3.PNG?raw=true)
</p>
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/4.PNG?raw=true)
</p>

### Penetrasi Malware
1. Pastikan terlebih dahulu bahwa kita telah mendapatkan akses terhadap komputer target. Pada *Armitage* ditandai dengan berubahnya icon PC target menjadi merah disertai listrik.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/5.PNG?raw=true)
</p>
2. Pastikan `command` shell Reverse TCP berjalan dengan baik, dan coba mengetikkan perintah `ls`
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/6.PNG?raw=true)
</p>
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/8.PNG?raw=true)
</p>
3. Kemudian klik kanan pada icon komputer targer, pilih `shell`, lalu klik `upload`
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/7.PNG?raw=true)
</p>
4. Pilih file malware yang hendak ditanam ke komputer target.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/9.PNG?raw=true)
</p>
5. Cek apakah file malware sudah terupload atau belum.
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/10.PNG?raw=true)
</p>
6. Pada komputer yang menjadi target penetrasi, yang mana telah terinstall dionaea, kita lakukan pengecekan log. Kita akan coba pengecekan log secara realtime dengan perintah : `tail -f dionaea.log`
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/12.png?raw=true)
</p>
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/13.png?raw=true)
</p>
7. Kita juga akan mencoba mengecek file log attack yang terekam oleh *dionaea* dengan `command`  : `gedit dionaea.log`
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/14.png?raw=true)
</p>
<p align="center">
![alt text](https://github.com/adeilhamfajri/PKSJ_Gokilz/blob/master/Dokumentasi/Tugas%204%20-%20IDS%20(Dionaea%20Malware%20Honeypot)/Uji%20Penetrasi/15.png?raw=true)
</p>

## Kesimpulan dan Saran

### *Kesimpulan*
1. Ubuntu 14.04 lebih cocok digunakan untuk instalasi Dionaea dibandingkan dengan Ubuntu 16.04.
2. Exploit yang paling populer untuk melakukan penetrasi adalah metode Reverse Proxy (Reverse TCP).
3. Malicious code sering disipkan dalam sebuah file untuk melakukan eksploitasi komputer target.
4. Aplikasi *Armitage* merupakan aplikasi penetrasi yang menjadi rekomendasi sebagai Honeypot Malware, yang mana bawaan dari Kali Linux.

### *Saran*
1. Disarankan untuk menggunakan Ubuntu 14.04 saat menginstall Dionaea karena banyak package yang tidak compatible dengan Ubuntu 16.04.
2. Disarankan untuk lebih berhati-hati jika akan membuka file yang mencurigakan, karena dalam file-file tersebut sering terdapat malicious code yang dapat membuka celah keamanan komputer.